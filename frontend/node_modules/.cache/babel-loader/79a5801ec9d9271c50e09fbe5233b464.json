{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\Projects\\\\Web Development\\\\Rescana\\\\CarProjects\\\\frontend\\\\src\\\\Components\\\\main\\\\Editable.jsx\";\nimport { TableCell, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport Config from \"../../config\";\nimport SnackBar from \"./SnackBar\";\n\nclass Editable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onClickEdit = this.onClickEdit.bind(this);\n    this.onChangeValue = this.onChangeValue.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.state = {\n      ifClick: false,\n      data: this.props.car,\n      value: this.props.value,\n      type: \"success\",\n      message: \"\",\n      open: false\n    };\n  }\n\n  onClickEdit() {\n    this.setState(() => {\n      return {\n        ifClick: true\n      };\n    });\n  }\n\n  onChangeValue(event) {\n    this.setState(() => {\n      switch (this.props.type) {\n        case \"name\":\n          return {\n            value: event.target.value,\n            data: { ...this.state.data,\n              name: event.target.value\n            }\n          };\n\n        case \"topSpeed\":\n          return {\n            value: event.target.value,\n            data: { ...this.state.data,\n              topSpeed: event.target.value\n            }\n          };\n\n        case \"price\":\n          return {\n            value: event.target.value,\n            data: { ...this.state.data,\n              price: event.target.value\n            }\n          };\n\n        default:\n          break;\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.data !== this.state.data) {\n      setTimeout(async () => {\n        try {\n          const res = await axios.patch(`${Config._URI}/data`, {\n            config: Config._CONFIG,\n            _id: {\n              _id: this.props._id\n            },\n            data: this.state.data\n          });\n\n          if (res.status === 200) {\n            this.setState(() => {\n              return {\n                ifClick: false,\n                open: true,\n                type: \"success\",\n                message: res.data.message\n              };\n            });\n          } else {\n            throw new Error(res.data.message);\n          }\n        } catch (error) {\n          console.error(error.response.data.message);\n          this.setState(() => {\n            return {\n              open: true,\n              type: \"error\",\n              message: error.response.data.message\n            };\n          });\n        }\n      }, 5000);\n    }\n  }\n\n  handleClose(event, reason) {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    this.setState(() => {\n      return {\n        open: false\n      };\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(TableCell, {\n      children: [this.state.ifClick ? /*#__PURE__*/_jsxDEV(TextField, {\n        autoFocus: true,\n        value: this.state.value,\n        onChange: e => {\n          this.onChangeValue(e);\n        },\n        label: this.props.type\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: this.onClickEdit,\n        children: [\" \", this.state.value]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SnackBar, {\n        handleClose: this.handleClose,\n        type: this.state.type,\n        message: this.state.message,\n        open: this.state.open\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Editable;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/Projects/Web Development/Rescana/CarProjects/frontend/src/Components/main/Editable.jsx"],"names":["TableCell","TextField","axios","React","Config","SnackBar","Editable","Component","constructor","props","onClickEdit","bind","onChangeValue","handleClose","state","ifClick","data","car","value","type","message","open","setState","event","target","name","topSpeed","price","componentDidUpdate","prevProps","prevState","setTimeout","res","patch","_URI","config","_CONFIG","_id","status","Error","error","console","response","reason","render","e"],"mappings":"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","sourcesContent":["import { TableCell, TextField } from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport Config from \"../../config\";\r\nimport SnackBar from \"./SnackBar\";\r\n\r\nclass Editable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onClickEdit = this.onClickEdit.bind(this);\r\n    this.onChangeValue = this.onChangeValue.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.state = {\r\n      ifClick: false,\r\n      data: this.props.car,\r\n      value: this.props.value,\r\n      type: \"success\",\r\n      message: \"\",\r\n      open: false,\r\n    };\r\n  }\r\n\r\n  onClickEdit() {\r\n    this.setState(() => {\r\n      return { ifClick: true };\r\n    });\r\n  }\r\n\r\n  onChangeValue(event) {\r\n    this.setState(() => {\r\n      switch (this.props.type) {\r\n        case \"name\":\r\n          return {\r\n            value: event.target.value,\r\n            data: { ...this.state.data, name: event.target.value },\r\n          };\r\n        case \"topSpeed\":\r\n          return {\r\n            value: event.target.value,\r\n            data: { ...this.state.data, topSpeed: event.target.value },\r\n          };\r\n        case \"price\":\r\n          return {\r\n            value: event.target.value,\r\n            data: { ...this.state.data, price: event.target.value },\r\n          };\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.data !== this.state.data) {\r\n      setTimeout(async () => {\r\n        try {\r\n          const res = await axios.patch(`${Config._URI}/data`, {\r\n            config: Config._CONFIG,\r\n            _id: {\r\n              _id: this.props._id,\r\n            },\r\n            data: this.state.data,\r\n          });\r\n          if (res.status === 200) {\r\n            this.setState(() => {\r\n              return {\r\n                ifClick: false,\r\n                open: true,\r\n                type: \"success\",\r\n                message: res.data.message,\r\n              };\r\n            });\r\n          } else {\r\n            throw new Error(res.data.message);\r\n          }\r\n        } catch (error) {\r\n          console.error(error.response.data.message);\r\n          this.setState(() => {\r\n            return {\r\n              open: true,\r\n              type: \"error\",\r\n              message: error.response.data.message,\r\n            };\r\n          });\r\n        }\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  handleClose(event, reason) {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    this.setState(() => {\r\n      return { open: false };\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TableCell>\r\n        {this.state.ifClick ? (\r\n          <TextField\r\n            autoFocus\r\n            value={this.state.value}\r\n            onChange={(e) => {\r\n              this.onChangeValue(e);\r\n            }}\r\n            label={this.props.type}\r\n          />\r\n        ) : (\r\n          <div onClick={this.onClickEdit}> {this.state.value}</div>\r\n        )}\r\n        <SnackBar\r\n          handleClose={this.handleClose}\r\n          type={this.state.type}\r\n          message={this.state.message}\r\n          open={this.state.open}\r\n        />\r\n      </TableCell>\r\n    );\r\n  }\r\n}\r\nexport default Editable;\r\n"]},"metadata":{},"sourceType":"module"}